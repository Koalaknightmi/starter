"use strict";var _typeof3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof3(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof3(e)},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).P2P=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return i(n||e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){var r=e("base64-js"),i=e("ieee754"),o=e("is-array");n.Buffer=c,n.SlowBuffer=function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);var i=new c(t,n,r);delete i.parent;return i},n.INSPECT_MAX_BYTES=50,c.poolSize=8192;var a=1073741823,s={};function c(e,t,n){if(!(this instanceof c))return new c(e,t,n);var r,i=void 0===e?"undefined":_typeof(e);if("number"===i)r=+e;else if("string"===i)r=c.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&o(e.data)&&(e=e.data),r=+e.length}if(r>a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");r<0?r=0:r>>>=0;var u,f=this;if(c.TYPED_ARRAY_SUPPORT?f=c._augment(new Uint8Array(r)):(f.length=r,f._isBuffer=!0),c.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)f._set(e);else if(function(e){return o(e)||c.isBuffer(e)||e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length}(e))if(c.isBuffer(e))for(u=0;u<r;u++)f[u]=e.readUInt8(u);else for(u=0;u<r;u++)f[u]=(e[u]%256+256)%256;else if("string"===i)f.write(e,0,t);else if("number"===i&&!c.TYPED_ARRAY_SUPPORT&&!n)for(u=0;u<r;u++)f[u]=0;return r>0&&r<=c.poolSize&&(f.parent=s),f}function u(e,t,n,r){return T(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function f(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function l(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(r+=I(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+I(i)}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function d(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function p(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;o++)i+=S(e[o]);return i}function g(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function y(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||t<o)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function m(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function v(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function _(e,t,n,r,i,o){if(t>i||t<o)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function w(e,t,n,r,o){return o||_(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,o){return o||_(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(e,t,n,r,52,8),n+8}c.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}(),c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o&&e[i]===t[i];i++);return i!==o&&(n=e[i],r=t[i]),n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new c(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new c(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i),i+=a.length}return r},c.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=R(e).length;break;default:n=e.length}return n},c.prototype.length=void 0,c.prototype.parent=void 0,c.prototype.toString=function(e,t,n){var r=!1;if(e||(e="utf8"),(t>>>=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:n>>>0)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return p(this,t,n);case"utf8":case"utf-8":return l(this,t,n);case"ascii":return h(this,t,n);case"binary":return d(this,t,n);case"base64":return f(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:c.compare(this,e)},c.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},c.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},c.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var i=r;r=t,t=n,n=i}if(t=Number(t)||0,n<0||t<0||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var o,a=this.length-t;switch(n?(n=Number(n))>a&&(n=a):n=a,r=String(r||"utf8").toLowerCase()){case"hex":o=function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}(this,e,t,n);break;case"utf8":case"utf-8":o=function(e,t,n,r){return T(k(t,e.length-n),e,n,r)}(this,e,t,n);break;case"ascii":o=u(this,e,t,n);break;case"binary":o=function(e,t,n,r){return u(e,t,n,r)}(this,e,t,n);break;case"base64":o=function(e,t,n,r){return T(R(t),e,n,r)}(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=function(e,t,n,r){return T(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+r)}return o},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)n=c._augment(this.subarray(e,t));else{var i=t-e;n=new c(i,void 0,!0);for(var o=0;o<i;o++)n[o]=this[o+e]}return n.length&&(n.parent=this.parent||this),n},c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||y(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||y(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||y(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||y(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||y(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||y(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||y(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||y(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||y(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||y(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||b(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i>>>0&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||b(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o>>>0&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):v(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):v(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||b(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,a=e<0?1:0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||b(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,a=e<0?1:0;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):m(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):m(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):v(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):v(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return w(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return w(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(var o=0;o<i;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=k(e.toString()),o=i.length;for(r=t;r<n;r++)this[r]=i[r%o]}return this}},c.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(c.TYPED_ARRAY_SUPPORT)return new c(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var A=c.prototype;c._augment=function(e){return e.constructor=c,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=A.get,e.set=A.set,e.write=A.write,e.toString=A.toString,e.toLocaleString=A.toString,e.toJSON=A.toJSON,e.equals=A.equals,e.compare=A.compare,e.copy=A.copy,e.slice=A.slice,e.readUIntLE=A.readUIntLE,e.readUIntBE=A.readUIntBE,e.readUInt8=A.readUInt8,e.readUInt16LE=A.readUInt16LE,e.readUInt16BE=A.readUInt16BE,e.readUInt32LE=A.readUInt32LE,e.readUInt32BE=A.readUInt32BE,e.readIntLE=A.readIntLE,e.readIntBE=A.readIntBE,e.readInt8=A.readInt8,e.readInt16LE=A.readInt16LE,e.readInt16BE=A.readInt16BE,e.readInt32LE=A.readInt32LE,e.readInt32BE=A.readInt32BE,e.readFloatLE=A.readFloatLE,e.readFloatBE=A.readFloatBE,e.readDoubleLE=A.readDoubleLE,e.readDoubleBE=A.readDoubleBE,e.writeUInt8=A.writeUInt8,e.writeUIntLE=A.writeUIntLE,e.writeUIntBE=A.writeUIntBE,e.writeUInt16LE=A.writeUInt16LE,e.writeUInt16BE=A.writeUInt16BE,e.writeUInt32LE=A.writeUInt32LE,e.writeUInt32BE=A.writeUInt32BE,e.writeIntLE=A.writeIntLE,e.writeIntBE=A.writeIntBE,e.writeInt8=A.writeInt8,e.writeInt16LE=A.writeInt16LE,e.writeInt16BE=A.writeInt16BE,e.writeInt32LE=A.writeInt32LE,e.writeInt32BE=A.writeInt32BE,e.writeFloatLE=A.writeFloatLE,e.writeFloatBE=A.writeFloatBE,e.writeDoubleLE=A.writeDoubleLE,e.writeDoubleBE=A.writeDoubleBE,e.fill=A.fill,e.inspect=A.inspect,e.toArrayBuffer=A.toArrayBuffer,e};var C=/[^+\/0-9A-z\-]/g;function S(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;a++){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((t-=3)>-1&&o.push(239,191,189),i=null);if(n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function I(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),o="0".charCodeAt(0),a="a".charCodeAt(0),s="A".charCodeAt(0),c="-".charCodeAt(0),u="_".charCodeAt(0);function f(e){var t=e.charCodeAt(0);return t===n||t===c?62:t===i||t===u?63:t<o?-1:t<o+10?t-o+26+26:t<s+26?t-s:t<a+26?t-a+26:void 0}e.toByteArray=function(e){var n,r,i,o,a,s;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;a="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,s=new t(3*e.length/4-a),i=a>0?e.length-4:e.length;var u=0;function l(e){s[u++]=e}for(n=0,r=0;n<i;n+=4,r+=3)l((16711680&(o=f(e.charAt(n))<<18|f(e.charAt(n+1))<<12|f(e.charAt(n+2))<<6|f(e.charAt(n+3))))>>16),l((65280&o)>>8),l(255&o);return 2===a?l(255&(o=f(e.charAt(n))<<2|f(e.charAt(n+1))>>4)):1===a&&(l((o=f(e.charAt(n))<<10|f(e.charAt(n+1))<<4|f(e.charAt(n+2))>>2)>>8&255),l(255&o)),s},e.fromByteArray=function(e){var t,n,i,o=e.length%3,a="";function s(e){return r.charAt(e)}function c(e){return s(e>>18&63)+s(e>>12&63)+s(e>>6&63)+s(63&e)}for(t=0,i=e.length-o;t<i;t+=3)a+=c(n=(e[t]<<16)+(e[t+1]<<8)+e[t+2]);switch(o){case 1:a+=s((n=e[e.length-1])>>2),a+=s(n<<4&63),a+="==";break;case 2:a+=s((n=(e[e.length-2]<<8)+e[e.length-1])>>10),a+=s(n>>4&63),a+=s(n<<2&63),a+="="}return a}}(void 0===n?this.base64js={}:n)},{}],4:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=u}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,f=(1<<u)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*c-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+d]=255&a,d+=p,a/=256,u-=8);e[n+d-p]|=128*g}},{}],5:[function(e,t,n){var r=Array.isArray,i=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],6:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),c=1;c<r;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),c=1;c<r;c++)s[c-1]=arguments[c];for(r=(u=n.slice()).length,c=0;c<r;c++)u[c].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned)&&((n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){return e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],8:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],9:[function(e,t,n){var r=t.exports={},i=[],o=!1;function a(){if(!o){var e;o=!0;for(var t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}o=!1}}function s(){}r.nextTick=function(e){i.push(e),o||setTimeout(a,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=s,r.addListener=s,r.once=s,r.off=s,r.removeListener=s,r.removeAllListeners=s,r.emit=s,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],10:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":11}],11:[function(e,t,n){(function(n){t.exports=s;var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},i=e("core-util-is");i.inherits=e("inherits");var o=e("./_stream_readable"),a=e("./_stream_writable");function s(e){if(!(this instanceof s))return new s(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}i.inherits(s,o),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(r(a.prototype),function(e){s.prototype[e]||(s.prototype[e]=a.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":13,"./_stream_writable":15,_process:9,"core-util-is":16,inherits:7}],12:[function(e,t,n){t.exports=o;var r=e("./_stream_transform"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":14,"core-util-is":16,inherits:7}],13:[function(e,t,n){(function(n){t.exports=l;var r=e("isarray"),i=e("buffer").Buffer;l.ReadableState=f;var o=e("events").EventEmitter;o.listenerCount||(o.listenerCount=function(e,t){return e.listeners(t).length});var a,s=e("stream"),c=e("core-util-is");c.inherits=e("inherits");var u=e("util");function f(t,n){var r=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=e("string_decoder/").StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function l(t){e("./_stream_duplex");if(!(this instanceof l))return new l(t);this._readableState=new f(t,this),this.readable=!0,s.call(this)}function h(e,t,n,r,i){var o=function(e,t){var n=null;c.isBuffer(t)||c.isString(t)||c.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(o)e.emit("error",o);else if(c.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),b(e,t);else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}u=u&&u.debuglog?u.debuglog("stream"):function(){},c.inherits(l,s),l.prototype.push=function(e,t){var n=this._readableState;return c.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding)!==n.encoding&&(e=new i(e,t),t=""),h(this,n,e,t,!1)},l.prototype.unshift=function(e){return h(this,this._readableState,e,"",!0)},l.prototype.setEncoding=function(t){return a||(a=e("string_decoder/").StringDecoder),this._readableState.decoder=new a(t),this._readableState.encoding=t,this};var d=8388608;function p(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||c.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=d)e=d;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){y(e)}):y(e))}function y(e){u("emit readable"),e.emit("readable"),m(e)}function b(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){!function(e,t){var n=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(u("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(e,t)}))}function m(e){var t=e._readableState;if(u("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function v(e,t){var n,r=t.buffer,o=t.length,a=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===o)n=null;else if(s)n=r.shift();else if(!e||e>=o)n=a?r.join(""):i.concat(r,o),r.length=0;else{if(e<r[0].length)n=(l=r[0]).slice(0,e),r[0]=l.slice(e);else if(e===r[0].length)n=r.shift();else{n=a?"":new i(e);for(var c=0,u=0,f=r.length;u<f&&c<e;u++){var l=r[0],h=Math.min(e-c,l.length);a?n+=l.slice(0,h):l.copy(n,c,0,h),h<l.length?r[0]=l.slice(h):r.shift(),c+=h}}}return n}function _(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}l.prototype.read=function(e){u("read",e);var t=this._readableState,n=e;if((!c.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?_(this):g(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&_(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),(t.ended||t.reading)&&u("reading or ended",i=!1),i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=p(n,t)),r=e>0?v(e,t):null,c.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&_(this),c.isNull(r)||this.emit("data",r),r},l.prototype._read=function(e){this.emit("error",new Error("not implemented"))},l.prototype.pipe=function(e,t){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?f:h;function c(e){u("onunpipe"),e===i&&h()}function f(){u("onend"),e.end()}a.endEmitted?n.nextTick(s):i.once("end",s),e.on("unpipe",c);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o.listenerCount(e,"data")&&(t.flowing=!0,m(e))}}(i);function h(){u("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",c),i.removeListener("end",f),i.removeListener("end",h),i.removeListener("data",d),!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l()}function d(t){u("ondata"),!1===e.write(t)&&(u("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,i.pause())}function p(t){u("onerror",t),b(),e.removeListener("error",p),0===o.listenerCount(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),b()}function y(){u("onfinish"),e.removeListener("close",g),b()}function b(){u("unpipe"),i.unpipe(e)}return e.on("drain",l),i.on("data",d),e._events&&e._events.error?r(e._events.error)?e._events.error.unshift(p):e._events.error=[p,e._events.error]:e.on("error",p),e.once("close",g),e.once("finish",y),e.emit("pipe",i),a.flowing||(u("pipe resume"),i.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},l.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&g(this);else{var o=this;n.nextTick(function(){u("readable nexttick read 0"),o.read(0)})}}return r},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!0,e.reading||(u("resume read 0"),this.read(0)),function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}(e,t)}))}(this,e)),this},l.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",function(){if(u("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){(u("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length))&&(r.push(i)||(n=!0,e.pause()))}),e)c.isFunction(e[i])&&c.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},r},l._fromList=v}).call(this,e("_process"))},{"./_stream_duplex":11,_process:9,buffer:2,"core-util-is":16,events:6,inherits:7,isarray:8,stream:21,"string_decoder/":22,util:1}],14:[function(e,t,n){t.exports=a;var r=e("./_stream_duplex"),i=e("core-util-is");function o(e,t){this.afterTransform=function(e,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,i.isNullOrUndefined(n)||e.push(n);o&&o(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;i.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":11,"core-util-is":16,inherits:7}],15:[function(e,t,n){(function(n){t.exports=c;var r=e("buffer").Buffer;c.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");function a(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function s(t,n){var r=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function c(t){var n=e("./_stream_duplex");if(!(this instanceof c||this instanceof n))return new c(t);this._writableState=new s(t,this),this.writable=!0,o.call(this)}function u(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function f(e,t,r,o){var a=!0;if(!(i.isBuffer(r)||i.isString(r)||i.isNullOrUndefined(r)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),n.nextTick(function(){o(s)}),a=!1}return a}function l(e,t,n){return!e.objectMode&&!1!==e.decodeStrings&&i.isString(t)&&(t=new r(t,n)),t}function h(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function d(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){r?n.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}(e,r,i,t,o);else{var a=y(e,r);a||r.corked||r.bufferProcessing||!r.buffer.length||g(e,r),i?n.nextTick(function(){p(e,r,a,o)}):p(e,r,a,o)}}function p(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),m(e,t)}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,h(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,a=i.encoding,s=i.callback,c=t.objectMode?1:o.length;if(h(e,t,!1,c,o,a,s),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=y(0,t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function v(e,t,r){t.ending=!0,m(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}i.inherits(c,o),c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},c.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return i.isFunction(t)&&(n=t,t=null),i.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),i.isFunction(n)||(n=function(){}),r.ended?u(this,0,n):f(this,r,e,n)&&(r.pendingcb++,o=function(e,t,n,r,o){n=l(t,n,r),i.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);t.writing||t.corked?t.buffer.push(new a(n,r,o)):h(e,t,!1,s,n,r,o);return c}(this,r,e,t,n)),o},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},c.prototype._write=function(e,t,n){n(new Error("not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;i.isFunction(e)?(n=e,e=null,t=null):i.isFunction(t)&&(n=t,t=null),i.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||v(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":11,_process:9,buffer:2,"core-util-is":16,inherits:7,stream:21}],16:[function(e,t,n){(function(e){function t(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":_typeof(e))},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return t(e)&&"[object RegExp]"===r(e)},n.isObject=t,n.isDate=function(e){return t(e)&&"[object Date]"===r(e)},n.isError=function(e){return t(e)&&("[object Error]"===r(e)||e instanceof Error)},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":_typeof(e))||void 0===e},n.isBuffer=function(t){return e.isBuffer(t)}}).call(this,e("buffer").Buffer)},{buffer:2}],17:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":12}],18:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":11,"./lib/_stream_passthrough.js":12,"./lib/_stream_readable.js":13,"./lib/_stream_transform.js":14,"./lib/_stream_writable.js":15,stream:21}],19:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":14}],20:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":15}],21:[function(e,t,n){t.exports=i;var r=e("events").EventEmitter;function i(){r.call(this)}e("inherits")(i,r),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(f(),0===r.listenerCount(this,"error"))throw e}function f(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",f),n.removeListener("close",f),e.removeListener("close",f)}return n.on("error",u),e.on("error",u),n.on("end",f),n.on("close",f),e.on("close",f),e.emit("pipe",n),e}},{events:6,inherits:7,"readable-stream/duplex.js":10,"readable-stream/passthrough.js":17,"readable-stream/readable.js":18,"readable-stream/transform.js":19,"readable-stream/writable.js":20}],22:[function(e,t,n){var r=e("buffer").Buffer,i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var o=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function c(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var i;r=(t+=e.toString(this.encoding,0,r)).length-1;if((i=t.charCodeAt(r))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:2}],23:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],24:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],25:[function(e,t,n){function r(){var e;try{e=n.storage.debug}catch(e){}return e}(n=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(r())},{"./debug":26}],26:[function(e,t,n){(n=t.exports=function(e){function t(){}function i(){var e=i,t=+new Date,a=t-(r||t);e.diff=a,e.prev=r,e.curr=t,r=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=o());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;c++;var i=n.formatters[r];if("function"==typeof i){var o=s[c];t=i.call(e,o),s.splice(c,1),c--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var u=i.log||n.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,i.enabled=!0;var a=n.enabled(e)?i:t;return a.namespace=e,a}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0;function o(){return n.colors[i++%n.colors.length]}},{ms:27}],27:[function(e,t,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=365.25*a;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if((e=""+e).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(e):t.long?function(e){return c(e,a,"day")||c(e,o,"hour")||c(e,i,"minute")||c(e,r,"second")||e+" ms"}(e):function(e){return e>=a?Math.round(e/a)+"d":e>=o?Math.round(e/o)+"h":e>=i?Math.round(e/i)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e)}},{}],28:[function(e,t,n){t.exports=function(e){for(var t,n=[].slice.call(arguments,1),r=0,i=n.length;r<i;r++)for(var o in t=n[r])e[o]=t[o];return e}},{}],29:[function(e,t,n){(function(n){var r=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(e(t[i]))return!0}else if(t&&"object"==(void 0===t?"undefined":_typeof(t)))for(var o in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:30}],30:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],31:[function(e,t,n){var r=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var o=n-Math.floor(n),a="";for(i=0;i<Math.floor(n);i++){a=Math.floor(Math.random()*t).toString(t)+a}if(o){var s=Math.pow(t,o);a=Math.floor(Math.random()*s).toString(t)+a}var c=parseInt(a,t);return c!==1/0&&c>=Math.pow(2,e)?r(e,t):a};r.rack=function(e,t,n){var i=function(i){var a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var s=r(e,t)}while(Object.hasOwnProperty.call(o,s));return o[s]=i,s},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},{}],32:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],33:[function(e,t,n){(function(n){t.exports=l;var r=e("debug")("simple-peer"),i=e("get-browser-rtc"),o=e("hat"),a=e("inherits"),s=e("is-typedarray"),c=e("once"),u=e("stream"),f=e("typedarray-to-buffer");function l(e){var t=this;if(!(t instanceof l))return new l(e);if(t._debug("new peer %o",e),e||(e={}),e.allowHalfOpen=!1,null==e.highWaterMark&&(e.highWaterMark=1048576),u.Duplex.call(t,e),t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||l.channelConfig,t.channelName=e.channelName||o(160),e.initiator||(t.channelName=null),t.config=e.config||l.config,t.constraints=e.constraints||l.constraints,t.reconnectTimer=e.reconnectTimer||0,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc||i(),!t._wrtc)throw"undefined"==typeof window?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser");t._maxBufferedAmount=e.highWaterMark,t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._pc.oniceconnectionstatechange=t._onIceConnectionStateChange.bind(t),t._pc.onsignalingstatechange=t._onSignalingStateChange.bind(t),t._pc.onicecandidate=t._onIceCandidate.bind(t),t.stream&&t._pc.addStream(t.stream),t._pc.onaddstream=t._onAddStream.bind(t),t.initiator?(t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}),t._pc.onnegotiationneeded=c(t._createOffer.bind(t)),"undefined"!=typeof window&&window.webkitRTCPeerConnection||t._pc.onnegotiationneeded()):t._pc.ondatachannel=t._setupData.bind(t),t.on("finish",function(){t.connected?setTimeout(function(){t._destroy()},100):t.once("connect",function(){setTimeout(function(){t._destroy()},100)})})}function h(){}a(l,u.Duplex),l.WEBRTC_SUPPORT=!!i(),l.config={iceServers:[{url:"stun:23.21.150.121",urls:"stun:23.21.150.121"}]},l.constraints={},l.channelConfig={},Object.defineProperty(l.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),l.prototype.address=function(){return{port:this.localPort,family:"IPv4",address:this.localAddress}},l.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}function n(e){try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),h,t._onError.bind(t))}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}}t._debug("signal()"),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){t.destroyed||("offer"===t._pc.remoteDescription.type&&t._createAnswer(),t._pendingCandidates.forEach(n),t._pendingCandidates=[])},t._onError.bind(t)),e.candidate&&(t._pc.remoteDescription?n(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},l.prototype.send=function(e){s.strict(e)||e instanceof ArrayBuffer||n.isBuffer(e)||"string"==typeof e||"undefined"!=typeof Blob&&e instanceof Blob||(e=JSON.stringify(e)),n.isBuffer(e)&&!s.strict(e)&&(e=new Uint8Array(e));var t=e.length||e.byteLength||e.size;this._channel.send(e),this._debug("write: %d bytes",t)},l.prototype.destroy=function(e){this._destroy(null,e)},l.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&e.message),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._chunk=null,n._cb=null,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},l.prototype._setupData=function(e){var t=this;t._channel=e.channel,t.channelName=t._channel.label,t._channel.binaryType="arraybuffer",t._channel.onmessage=t._onChannelMessage.bind(t),t._channel.onopen=t._onChannelOpen.bind(t),t._channel.onclose=t._onChannelClose.bind(t)},l.prototype._read=function(){},l.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(e){return r._onError(e)}r._channel.bufferedAmount>r._maxBufferedAmount?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},l.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){if(!e.destroyed){t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,h,e._onError.bind(e));var n=function(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})};e.trickle||e._iceComplete?n():e.once("_iceComplete",n)}},e._onError.bind(e),e.offerConstraints)},l.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){if(!e.destroyed){t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,h,e._onError.bind(e));var n=function(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})};e.trickle||e._iceComplete?n():e.once("_iceComplete",n)}},e._onError.bind(e),e.answerConstraints)},l.prototype._onIceConnectionStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceGatheringState,n=e._pc.iceConnectionState;e._debug("iceConnectionStateChange %s %s",t,n),e.emit("iceConnectionStateChange",t,n),"connected"!==n&&"completed"!==n||(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===n&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"closed"===n&&e._destroy()}},l.prototype._maybeReady=function(){var e=this;function t(t){if(t.forEach(function(t){"remotecandidate"===t.type?(e.remoteAddress=t.ipAddress,e.remoteFamily="IPv4",e.remotePort=Number(t.portNumber),e._debug("connect remote: %s:%s (%s)",e.remoteAddress,e.remotePort,e.remoteFamily)):"localcandidate"===t.type&&"host"===t.candidateType&&(e.localAddress=t.ipAddress,e.localPort=Number(t.portNumber),e._debug("connect local: %s:%s",e.localAddress,e.localPort))}),e._connecting=!1,e.connected=!0,e._chunk){try{e.send(e._chunk)}catch(t){return e._onError(t)}e._chunk=null,e._debug('sent chunk from "write before connect"');var n=e._cb;e._cb=null,n(null)}e._interval=setInterval(function(){if(e._cb&&e._channel&&!(e._channel.bufferedAmount>e._maxBufferedAmount)){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},150),e._interval.unref&&e._interval.unref(),e._debug("connect"),e.emit("connect")}e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,"undefined"!=typeof window&&window.mozRTCPeerConnection?e._pc.getStats(null,function(e){var n=[];e.forEach(function(e){n.push(e)}),t(n)},e._onError.bind(e)):e._pc.getStats(function(e){var n=[];e.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),t(n)}))},l.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},l.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},l.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var n=e.data;if(t._debug("read: %d bytes",n.byteLength||n.length),n instanceof ArrayBuffer)n=f(new Uint8Array(n)),t.push(n);else{try{n=JSON.parse(n)}catch(e){}t.emit("data",n)}}},l.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},l.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},l.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},l.prototype._onError=function(e){var t=this;t.destroyed||(t._debug("error %s",e.message||e),t._destroy(e))},l.prototype._debug=function(){var e=[].slice.call(arguments),t=this.channelName&&this.channelName.substring(0,7);e[0]="["+t+"] "+e[0],r.apply(null,e)}}).call(this,e("buffer").Buffer)},{buffer:2,debug:25,"get-browser-rtc":34,hat:31,inherits:32,"is-typedarray":35,once:37,stream:21,"typedarray-to-buffer":38}],34:[function(e,t,n){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.mozRTCPeerConnection||window.RTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.mozRTCSessionDescription||window.RTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.mozRTCIceCandidate||window.RTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],35:[function(e,t,n){t.exports=o,o.strict=a,o.loose=s;var r=Object.prototype.toString,i={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function o(e){return a(e)||s(e)}function a(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function s(e){return i[r.call(e)]}},{}],36:[function(e,t,n){t.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){r[e]=t[e]});return r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}}},{}],37:[function(e,t,n){var r=e("wrappy");function i(e){var t=function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}t.exports=r(i),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},{wrappy:36}],38:[function(e,t,n){(function(n){var r=e("is-typedarray").strict;t.exports=function(e){var t=n.TYPED_ARRAY_SUPPORT?n._augment:function(e){return new n(e)};return e instanceof Uint8Array?t(e):e instanceof ArrayBuffer?t(new Uint8Array(e)):r(e)?t(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)):new n(e)}}).call(this,e("buffer").Buffer)},{buffer:2,"is-typedarray":35}],39:[function(e,t,n){(function(t){var r=e("isarray"),i=e("./is-buffer");n.deconstructPacket=function(e){var t=[],n=e.data;var o=e;return o.data=function e(n){if(!n)return n;if(i(n)){var o={_placeholder:!0,num:t.length};return t.push(n),o}if(r(n)){for(var a=new Array(n.length),s=0;s<n.length;s++)a[s]=e(n[s]);return a}if("object"==(void 0===n?"undefined":_typeof(n))&&!(n instanceof Date)){for(var c in a={},n)a[c]=e(n[c]);return a}return n}(n),o.attachments=t.length,{packet:o,buffers:t}},n.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder)return t[n.num];if(r(n)){for(var i=0;i<n.length;i++)n[i]=e(n[i]);return n}if(n&&"object"==(void 0===n?"undefined":_typeof(n))){for(var o in n)n[o]=e(n[o]);return n}return n}(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){var o=0,a=e;!function e(s,c,u){if(!s)return s;if(t.Blob&&s instanceof Blob||t.File&&s instanceof File){o++;var f=new FileReader;f.onload=function(){u?u[c]=this.result:a=this.result,--o||n(a)},f.readAsArrayBuffer(s)}else if(r(s))for(var l=0;l<s.length;l++)e(s[l],l,s);else if(s&&"object"==(void 0===s?"undefined":_typeof(s))&&!i(s))for(var h in s)e(s[h],h,s)}(a),o||n(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":41,isarray:44}],40:[function(e,t,n){var r=e("debug")("socket.io-parser"),i=e("json3"),o=(e("isarray"),e("component-emitter")),a=e("./binary"),s=e("./is-buffer");function c(){}function u(e){var t="",o=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,t+=e.nsp),null!=e.id&&(o&&(t+=",",o=!1),t+=e.id),null!=e.data&&(o&&(t+=","),t+=i.stringify(e.data)),r("encoded %j as %s",e,t),t}function f(){this.reconstructor=null}function l(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:n.ERROR,data:"parser error"}}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=c,n.Decoder=f,c.prototype.encode=function(e,t){(r("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)?function(e,t){a.removeBlobs(e,function(e){var n=a.deconstructPacket(e),r=u(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,t):t([u(e)])},o(f.prototype),f.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t={},o=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return h();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++o);)t.attachments+=e.charAt(o);t.attachments=Number(t.attachments)}if("/"==e.charAt(o+1))for(t.nsp="";++o;){var a=e.charAt(o);if(","==a)break;if(t.nsp+=a,o+1==e.length)break}else t.nsp="/";var s=e.charAt(o+1);if(""!=s&&Number(s)==s){for(t.id="";++o;){var a=e.charAt(o);if(null==a||Number(a)!=a){--o;break}if(t.id+=e.charAt(o),o+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++o))try{t.data=i.parse(e.substr(o))}catch(e){return h()}return r("decoded %s as %j",e,t),t}(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){this.reconPack.data.data=this.buffers.reduce(function(e,t,n,r){return this._appendBuffer(e,t)}),a.reconstructPacket(this.reconPack,[this.reconPack.data.data]);var t=this.reconPack;return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},l.prototype._appendBuffer=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}},{"./binary":39,"./is-buffer":41,"component-emitter":42,debug:43,isarray:44,json3:45}],41:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],43:[function(e,t,n){function r(e){return r.enabled(e)?function(t){t=function(e){return e instanceof Error?e.stack||e.message:e}(t);var n=new Date,i=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)"-"===(e=t[i].replace("*",".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){return e>=36e5?(e/36e5).toFixed(1)+"h":e>=6e4?(e/6e4).toFixed(1)+"m":e>=1e3?(e/1e3|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(e){}},{}],44:[function(e,t,n){arguments[4][8][0].apply(n,arguments)},{dup:8}],45:[function(e,t,n){!function(e){var t,r,i,o={}.toString,a="object"==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&JSON,s="object"==(void 0===n?"undefined":_typeof(n))&&n&&!n.nodeType&&n;s&&a?(s.stringify=a.stringify,s.parse=a.parse):s=e.JSON=a||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(e){}function u(e){if(u[e]!==i)return u[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=u("json-stringify")&&u("json-parse");else{var n,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=s.stringify,f="function"==typeof a&&c;if(f){(n=function(){return 1}).toJSON=n;try{f="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(o)===i&&a(i)===i&&a()===i&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([i])&&"null"==a(null)&&"[null,null,null]"==a([i,o,null])&&a({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(e){f=!1}}t=f}if("json-parse"==e){var l=s.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var h=5==(n=l(r)).a.length&&1===n.a[0];if(h){try{h=!l('"\t"')}catch(e){}if(h)try{h=1!==l("01")}catch(e){}if(h)try{h=1!==l("1.")}catch(e){}}}}catch(e){h=!1}t=h}}return u[e]=!!t}if(!u("json")){var f="[object Function]",l="[object Number]",h="[object String]",d="[object Array]",p=u("bug-string-char-index");if(!c)var g=Math.floor,y=[0,31,59,90,120,151,181,212,243,273,304,334],b=function(e,t){return y[t]+365*(e-1970)+g((e-1969+(t=+(t>1)))/4)-g((e-1901+t)/100)+g((e-1601+t)/400)};(t={}.hasOwnProperty)||(t=function(e){var n,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=o?t=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=r.constructor,t=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),r=null,t.call(this,e)});var m={boolean:1,number:1,string:1,undefined:1};if(r=function(e,n){var i,a,s,c=0;for(s in(i=function(){this.valueOf=0}).prototype.valueOf=0,a=new i)t.call(a,s)&&c++;return i=a=null,c?r=2==c?function(e,n){var r,i={},a=o.call(e)==f;for(r in e)a&&"prototype"==r||t.call(i,r)||!(i[r]=1)||!t.call(e,r)||n(r)}:function(e,n){var r,i,a=o.call(e)==f;for(r in e)a&&"prototype"==r||!t.call(e,r)||(i="constructor"===r)||n(r);(i||t.call(e,r="constructor"))&&n(r)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,n){var r,i,s=o.call(e)==f,c=!s&&"function"!=typeof e.constructor&&function(e,t){var n=_typeof(e[t]);return"object"==n?!!e[t]:!m[n]}(e,"hasOwnProperty")?e.hasOwnProperty:t;for(r in e)s&&"prototype"==r||!c.call(e,r)||n(r);for(i=a.length;r=a[--i];c.call(e,r)&&n(r));}),r(e,n)},!u("json-stringify")){var v={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},_=function(e,t){return("000000"+(t||0)).slice(-e)},w=function(e){var t,n='"',r=0,i=e.length,o=i>10&&p;for(o&&(t=e.split(""));r<i;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=v[a];break;default:if(a<32){n+="\\u00"+_(2,a.toString(16));break}n+=o?t[r]:p?e.charAt(r):e[r]}}return n+'"'},E=function e(n,a,s,c,u,f,p){var y,m,v,E,A,C,S,k,R,T,I,L,B,M,P,x;try{y=a[n]}catch(e){}if("object"==(void 0===y?"undefined":_typeof(y))&&y)if("[object Date]"!=(m=o.call(y))||t.call(y,"toJSON"))"function"==typeof y.toJSON&&(m!=l&&m!=h&&m!=d||t.call(y,"toJSON"))&&(y=y.toJSON(n));else if(y>-1/0&&y<1/0){if(b){for(A=g(y/864e5),v=g(A/365.2425)+1970-1;b(v+1,0)<=A;v++);for(E=g((A-b(v,0))/30.42);b(v,E+1)<=A;E++);A=1+A-b(v,E),S=g((C=(y%864e5+864e5)%864e5)/36e5)%24,k=g(C/6e4)%60,R=g(C/1e3)%60,T=C%1e3}else v=y.getUTCFullYear(),E=y.getUTCMonth(),A=y.getUTCDate(),S=y.getUTCHours(),k=y.getUTCMinutes(),R=y.getUTCSeconds(),T=y.getUTCMilliseconds();y=(v<=0||v>=1e4?(v<0?"-":"+")+_(6,v<0?-v:v):_(4,v))+"-"+_(2,E+1)+"-"+_(2,A)+"T"+_(2,S)+":"+_(2,k)+":"+_(2,R)+"."+_(3,T)+"Z"}else y=null;if(s&&(y=s.call(a,n,y)),null===y)return"null";if("[object Boolean]"==(m=o.call(y)))return""+y;if(m==l)return y>-1/0&&y<1/0?""+y:"null";if(m==h)return w(""+y);if("object"==(void 0===y?"undefined":_typeof(y))){for(M=p.length;M--;)if(p[M]===y)throw TypeError();if(p.push(y),I=[],P=f,f+=u,m==d){for(B=0,M=y.length;B<M;B++)L=e(B,y,s,c,u,f,p),I.push(L===i?"null":L);x=I.length?u?"[\n"+f+I.join(",\n"+f)+"\n"+P+"]":"["+I.join(",")+"]":"[]"}else r(c||y,function(t){var n=e(t,y,s,c,u,f,p);n!==i&&I.push(w(t)+":"+(u?" ":"")+n)}),x=I.length?u?"{\n"+f+I.join(",\n"+f)+"\n"+P+"}":"{"+I.join(",")+"}":"{}";return p.pop(),x}};s.stringify=function(e,t,n){var r,i,a,s;if("function"==typeof t||"object"==(void 0===t?"undefined":_typeof(t))&&t)if((s=o.call(t))==f)i=t;else if(s==d){a={};for(var c,u=0,p=t.length;u<p;c=t[u++],((s=o.call(c))==h||s==l)&&(a[c]=1));}if(n)if((s=o.call(n))==l){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==h&&(r=n.length<=10?n:n.slice(0,10));return E("",((c={})[""]=e,c),i,a,r,"",[])}}if(!u("json-parse")){var A,C,S=String.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},R=function(){throw A=C=null,SyntaxError()},T=function(){for(var e,t,n,r,i,o=C,a=o.length;A<a;)switch(i=o.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=p?o.charAt(A):o[A],A++,e;case 34:for(e="@",A++;A<a;)if((i=o.charCodeAt(A))<32)R();else if(92==i)switch(i=o.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=k[i],A++;break;case 117:for(t=++A,n=A+4;A<n;A++)(i=o.charCodeAt(A))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||R();e+=S("0x"+o.slice(t,A));break;default:R()}else{if(34==i)break;for(i=o.charCodeAt(A),t=A;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++A);e+=o.slice(t,A)}if(34==o.charCodeAt(A))return A++,e;R();default:if(t=A,45==i&&(r=!0,i=o.charCodeAt(++A)),i>=48&&i<=57){for(48==i&&((i=o.charCodeAt(A+1))>=48&&i<=57)&&R(),r=!1;A<a&&((i=o.charCodeAt(A))>=48&&i<=57);A++);if(46==o.charCodeAt(A)){for(n=++A;n<a&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==A&&R(),A=n}if(101==(i=o.charCodeAt(A))||69==i){for(43!=(i=o.charCodeAt(++A))&&45!=i||A++,n=A;n<a&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==A&&R(),A=n}return+o.slice(t,A)}if(r&&R(),"true"==o.slice(A,A+4))return A+=4,!0;if("false"==o.slice(A,A+5))return A+=5,!1;if("null"==o.slice(A,A+4))return A+=4,null;R()}return"$"},I=function(e,t,n){var r=L(e,t,n);r===i?delete e[t]:e[t]=r},L=function(e,t,n){var i,a=e[t];if("object"==(void 0===a?"undefined":_typeof(a))&&a)if(o.call(a)==d)for(i=a.length;i--;)I(a,i,n);else r(a,function(e){I(a,e,n)});return n.call(e,t,a)};s.parse=function(e,t){var n,r;return A=0,C=""+e,n=function e(t){var n,r;if("$"==t&&R(),"string"==typeof t){if("@"==(p?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=T());r||(r=!0))r&&(","==t?"]"==(t=T())&&R():R()),","==t&&R(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=T());r||(r=!0))r&&(","==t?"}"==(t=T())&&R():R()),","!=t&&"string"==typeof t&&"@"==(p?t.charAt(0):t[0])&&":"==T()||R(),n[t.slice(1)]=e(T());return n}R()}return t}(T()),"$"!=T()&&R(),A=C=null,t&&o.call(t)==f?L(((r={})[""]=n,r),"",t):n}}}}(this)},{}],46:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},{}],47:[function(e,t,n){var r,i;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,s=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,u="https:"===window.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),f=window.AudioContext||window.webkitAudioContext,l=document.createElement("video"),h=l&&l.canPlayType&&"probably"===l.canPlayType('video/webm; codecs="vp8", vorbis'),d=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:i,support:!!o&&h&&!!d,supportRTCPeerConnection:!!o,supportVp8:h,supportGetUserMedia:!!d,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!f||!f.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,AudioContext:f,PeerConnection:o,SessionDescription:s,IceCandidate:a,MediaStream:c,getUserMedia:d}},{}],"/":[function(e,t,n){window.myDebug=e("debug");var r=e("simple-peer"),i=e("component-emitter"),o=e("socket.io-parser"),a=e("to-array"),s=e("has-binary"),c=e("component-bind"),u=e("debug")("socket"),f=e("hat"),l=e("extend.js"),h=e("webrtcsupport"),d=i.prototype.emit;function p(e,t,n){var i=this;i.useSockets=!0,i.usePeerConnection=!1,i.decoder=new o.Decoder(this),i.decoder.on("decoded",c(this,this.ondecoded)),i.socket=e,i.cb=n,i._peers={},i.readyPeers=0,i.ready=!1,i._peerEvents={upgrade:1,error:1,peer_signal:1,peer_ready:1,stream:1};i.opts=l({autoUpgrade:!0,numClients:5},t||{}),i.peerOpts=i.opts.peerOpts||{},i.numConnectedClients,e.on("numClients",function(t){i.peerId=e.io.engine.id,i.numConnectedClients=t,h.supportDataChannel&&function(e){for(var t=[],n=0;n<i.opts.numClients;++n)o();function o(){var e=f(160),n=l(i.peerOpts,{initiator:!0}),o=i._peers[e]=new r(n);o.setMaxListeners(50),i.setupPeerEvents(o),o.on("signal",function(n){t.push({offer:n,offerId:e}),a()}),o.on("error",function(e){d.call(this,"peer-error",e),u("Error in peer %s",e)})}function a(){t.length===i.opts.numClients&&(u("generated %s offers",i.opts.numClients),e(t))}}(function(t){var n={offers:t,fromPeerId:i.peerId};e.emit("offers",n)})}),e.on("offer",function(t){var n=l(i.peerOpts,{initiator:!1}),o=i._peers[t.fromPeerId]=new r(n);i.numConnectedClients++,o.setMaxListeners(50),i.setupPeerEvents(o),o.on("signal",function(n){var r={signal:n,offerId:t.offerId,fromPeerId:i.peerId,toPeerId:t.fromPeerId};e.emit("peer-signal",r)}),o.on("error",function(e){d.call(this,"peer-error",e),u("Error in peer %s",e)}),o.signal(t.offer)}),e.on("peer-signal",function(t){var n=i._peers[t.offerId]||i._peers[t.fromPeerId];n.on("signal",function(n){var r={signal:n,offerId:t.offerId,fromPeerId:i.peerId,toPeerId:t.fromPeerId};e.emit("peer-signal",r)}),n.signal(t.signal)}),i.on("peer_ready",function(e){i.readyPeers++,i.readyPeers>=i.numConnectedClients&&!i.ready&&(i.ready=!0,i.opts.autoUpgrade&&(i.usePeerConnection=!0),"function"==typeof i.cb&&i.cb(),i.emit("upgrade"))})}i(p.prototype),p.prototype.setupPeerEvents=function(e){var t=this;e.on("connect",function(e){t.emit("peer_ready",e)}),e.on("data",function(e){this.destroyed||t.decoder.add(e)}),e.on("stream",function(e){t.emit("stream",e)})},p.prototype.on=function(e,t){var n=this;this.socket.addEventListener(e,function(t){d.call(n,e,t)}),this.addEventListener(e,t)},p.prototype.emit=function(e,t){var n=this,r=t||{},i=new o.Encoder;if(this._peerEvents.hasOwnProperty(e)||r.fromSocket)d.apply(this,arguments);else if(this.usePeerConnection||!this.useSockets){var c=a(arguments),u=o.EVENT;s(c)&&(u=o.BINARY_EVENT);var f={type:u,data:c};i.encode(f,function(e){if(e[1]instanceof ArrayBuffer)n._sendArray(e);else{if(!e)throw new Error("Encoding error");for(var t=0;t<e.length;t++)n._send(e[t])}})}else this.socket.emit(e,t)},p.prototype._sendArray=function(e){var t=e[0],n=e[1].byteLength,r=Math.ceil(n/5e3),i=t.substr(0,1)+r+t.substr(t.indexOf("-"));this._send(i),this.binarySlice(e[1],5e3,this._send)},p.prototype._send=function(e){for(var t in this._peers){var n=this._peers[t];n._channelReady&&n.send(e)}},p.prototype.binarySlice=function(e,t,n){for(var r=0;r<e.byteLength;r+=t){var i=e.slice(r,r+t);n.call(this,i)}},p.prototype.ondecoded=function(e){var t=e.data||[];d.apply(this,t)},p.prototype.disconnect=function(){for(var e in this._peers){this._peers[e].destroy(),this.socket.disconnect()}},p.prototype.upgrade=function(){this.usePeerConnection=!0},t.exports=p},{"component-bind":23,"component-emitter":24,debug:25,"extend.js":28,"has-binary":29,hat:31,"simple-peer":33,"socket.io-parser":40,"to-array":46,webrtcsupport:47}]},{},[])("/")});